<h1>All Products</h1>

<%= form_for(:search,url: products_path,method: :get) do |form|%>
  <div class="field">
    <%= form.label :Search %>
    <%= form.text_field :query %>
  </div>

  <div class="actions">
    <%= form.submit 'search' %>
  </div>
<% end %>

<table>
  <thead>
    <tr>
      <th >Title</th>
      <th >Category</th>
      <th >Description</th>
      <th >Price</th>
      <th >Stock</th>
    </tr>
  </thead>

  <tbody>
    <% @products.each do |product| %>
      <tr>
        <td><%= product.title %></td>
        <td><%= product.category %></td>
        <td><%= product.description %></td>
        <td><%= product.price %></td>
        <td><%= product.quantity %></td>
        <td><%= link_to 'Show', product_path(product)  %></td>
        <% if product.user_id == current_user.id %>
          <td><%= link_to 'Edit', edit_product_path(product) %></td>
          <td><%= link_to 'Destroy', product_path(product), method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
<h1><%= current_user.cart %></h1>